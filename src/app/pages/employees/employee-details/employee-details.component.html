<div class="header pb-8 pt-5 pt-lg-6 d-flex align-items-center">
    <!-- Mask -->
    <span class="mask bg-gradient-danger1 opacity-8">
        <div class="container-fluid">
            <div class="header-body">
                <div class="row my-2">
                    <div class="col text-white">
                        <h2 class="text-white my-5">{{type}}
                        </h2>
                    </div>
                </div>
            </div>
        </div>
    </span>

    <div class="row d-flex justify-content-end mx-5 w-100" *ngIf="type == 'Edit Employee'">
        <button class="btn btn-icon btn-3 btn-default btn-sm p-2" type="button" (click)="submitForm()">
            <span class="btn-inner--icon"><i class="fas fa-save"></i></span>
            <span class="btn-inner--text">Save</span>
        </button>
    </div>

    <div class="row d-flex justify-content-end mx-5 w-100" *ngIf="type == 'Add Employee'">
        <button class="btn btn-icon btn-3 btn-default btn-sm p-2" type="button" (click)="addEmloyee()" [disabled]="employeeForm.invalid">
            <span class="btn-inner--icon"><i class="fas fa-plus"></i></span>
            <span class="btn-inner--text">Add</span>
        </button>
    </div>

</div>


<nz-spin [nzSpinning]="initLoading">

    <div class="container-fluid mt--7 mb-5">
        <div class="row">
            <div class="col-xl-4 order-xl-2 mb-3 mb-xl-0">
                <div class="card card-profile shadow mb-3" *ngIf="!showLeaves">
                    <div class="row justify-content-center">
                        <div class="col-lg-3 order-lg-2">
                            <div class="card-profile-image">
                                <a>
                                    <img [src]="selectedImg ? selectedImg :thumbFallback " class="rounded-circle mt-3">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="card-header text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4">
                        <div class="d-flex justify-content-between">
                            <a class="btn btn-sm btn-info mr-4" href="mailto: {{selectedEmployee?.email}}">Email</a>
                            <a class="btn btn-sm btn-default float-right" href="tel: {{selectedEmployee?.mobile}}">Connect</a>
                        </div>
                    </div>
                    <div class="card-body pt-2 pt-md-4 p-0">
                        <div class="card-body pt-0 pt-md-2">
                            <div class="row d-flex justify-content-center mt-5">
                                <h1>{{selectedEmployee?.firstName + " " + selectedEmployee?.lastName}}</h1>
                            </div>
                            <div class="row d-flex justify-content-center">
                                <button class="btn btn-icon btn-3 btn-default btn-sm" type="button" (click)="disabledEmployee()" *ngIf="showEditBtn">
                                    <span class="btn-inner--text">Disable</span>
                                </button>
                            </div>
                            <div class="row">
                                <div class="col-md-6 col-sm-12 col-xs-12" *ngFor="let leave of selectedLeaveInfos">
                                    <div class="card-profile-stats d-flex justify-content-center mt-md-1">
                                        <div>
                                            <span class="heading">
                                                <span class="text-dark">{{leave?.remainingDays ? leave?.remainingDays
                                                    + ' D' : ''}}{{leave?.remainingHours ? leave?.remainingHours + ' H'
                                                    : ''}}</span>
                                            <span *ngIf="leave?.remainingDays || leave?.remainingHours"> /</span>
                                            <span class="totalDays mx-1">{{leave?.totalDays + ' Days'}}</span>
                                            </span>
                                            <span class="description text-dark mt-1">{{leave?.leaveTypeName}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card card-profile shadow">
                    <div class="card-header bg-white border-0">
                        <div class="row align-items-center">
                            <div class="col-8">
                                <h3 class="mb-0">Employee Materials</h3>
                            </div>
                            <div class="col-4 text-right" *ngIf="showEditBtn">
                                <button nz-button nzType="default" (click)="addEmployeeMaterials()">Add</button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0 m-0">
                        <nz-table #basicTable [nzData]="employeeMaterial" [nzNoResult]="nzNoResult" [nzScroll]="{y: '230px' , x: '100px'}" [nzShowPagination]="false">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th class="text-center">Quantity</th>
                                    <th>Serial Number</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let data of basicTable.data;let i=index">
                                    <td [nzDisabled]="false">{{i+1}}-{{data?.materialType?.enName}}</td>
                                    <td [nzDisabled]="true" class="text-center">{{data?.quantity}}</td>
                                    <td>{{data?.inTransaction?.serialNumber}}</td>
                                    <td>
                                        <i nz-icon nzType="close-square" nzTheme="outline" [nzTheme]="'twotone'" style="cursor: pointer;" class="d-flex justify-content-center align-items-end" [nzTwotoneColor]="'#f56036'" (click)="disabledEmployeeMaterial(data)"></i>
                                    </td>
                                </tr>
                                <ng-template #nzNoResult>
                                    <nz-empty [nzNotFoundContent]="contentTpl">
                                        <ng-template #contentTpl>
                                            <span class="my-2">No Materials</span>
                                        </ng-template>
                                    </nz-empty>
                                </ng-template>
                            </tbody>
                        </nz-table>
                    </div>
                </div>
            </div>
            <div class="col-xl-8 order-xl-1">
                <div class="card bg-secondary shadow">
                    <div class="card-header bg-white border-0">
                        <div class="row align-items-center">
                            <div class="col-8">
                                <h3 class="mb-0">Employee Information </h3>
                            </div>
                            <div class="col-4 text-right">
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <form [formGroup]="employeeForm">
                            <div class="pl-lg-4">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="form-control-label" for="input-username">First Name</label>
                                            <input type="text" nz-input [formControlName]="'firstName'" class="form-control form-control-alternative" placeholder="First Name">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group flex-column d-flex">
                                            <label class="form-control-label" for="input-email">Last Name</label>
                                            <input type="text" nz-input [formControlName]="'lastName'" class="form-control form-control-alternative" placeholder="Last Name">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="form-control-label">Work Email</label>
                                            <input type="text" nz-input [formControlName]="'email'" class="form-control form-control-alternative" placeholder="example@example.com">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="form-control-label">Personal Email</label>
                                            <input type="email" nz-input [formControlName]="'personalEmail'" class="form-control form-control-alternative" placeholder="example@example.com">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label class="form-control-label">Birth Date</label>
                                            <nz-date-picker [formControlName]="'birthDate'" class="w-100" [nzSize]="'large'" [nzFormat]="'yyyy-MM-dd'" [nzShowTime]="false">
                                            </nz-date-picker>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 row m-0">
                                        <div class="form-group col-lg-6 p-1">
                                            <label class="form-control-label">Gender</label>
                                            <input type="text" nz-input [formControlName]="'gender'" class="form-control form-control-alternative" placeholder="Gender">
                                        </div>
                                        <div class="form-group col-lg-6 p-1">
                                            <label class="form-control-label">Martial Status</label>
                                            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Martial Status" [formControlName]="'martialStatusId'" [nzSize]="'large'" class="d-block">
                                                <nz-option *ngFor="let m of martialStatusList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                            </nz-select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="row my-5">
                    <div class="col-xl-6 order-xl-1">
                        <div class="card bg-secondary shadow">
                            <div class="card-header bg-white border-0">
                                <div class="row align-items-center">
                                    <div class="col-6">
                                        <h3 class="mb-0">Contact Information </h3>
                                    </div>
                                    <div class="col-6 text-right">
                                        <!-- <a class="btn btn-sm btn-primary"></a> -->
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <form [formGroup]="employeeForm">
                                    <div class="pl-lg-4">
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Country</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Country" [formControlName]="'countryId'" [nzSize]="'large'" class="d-block" (ngModelChange)="applyFilter($event , 'Country')">
                                                        <nz-option *ngFor="let m of countryList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">City</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="City" [formControlName]="'cityId'" [nzSize]="'large'" class="d-block">
                                                        <nz-option *ngFor="let m of cityList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Street</label>
                                                    <input type="text" [formControlName]="'street'" class="form-control form-control-alternative" placeholder="Street">
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Mobile</label>
                                                    <input type="text" [formControlName]="'mobile'" class="form-control form-control-alternative" placeholder="Mobile">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <hr>
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label class="form-control-label">Emergency Name</label>
                                                    <input type="text" [formControlName]="'emergencyName'" class="form-control form-control-alternative" placeholder="Emergency Name">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label class="form-control-label">Emergency Phone</label>
                                                    <input type="text" [formControlName]="'emergencyPhone'" class="form-control form-control-alternative" placeholder="Emergency Phone">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label class="form-control-label">Emergency Relation</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Emergency Relation" [formControlName]="'emergencyRelationId'" [nzSize]="'large'" class="d-block">
                                                        <nz-option *ngFor="let m of emergencyRelationList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-6 order-xl-1">
                        <div class="card bg-secondary shadow">
                            <div class="card-header bg-white border-0">
                                <div class="row align-items-center">
                                    <div class="col-6">
                                        <h3 class="mb-0">Work Information </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <form [formGroup]="employeeForm">
                                    <div class="pl-lg-4">
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Department</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Department" [formControlName]="'departmentId'" [nzSize]="'large'" class="d-block">
                                                        <nz-option *ngFor="let m of departmentList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Position</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Position" [formControlName]="'positionId'" [nzSize]="'large'" class="d-block">
                                                        <nz-option *ngFor="let m of positionsList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label class="form-control-label">Direct Manager</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Parent Employee" [formControlName]="'parentEmployeeId'" [nzSize]="'large'" class="d-block">
                                                        <nz-option *ngFor="let m of parentEmployeesList" [nzLabel]="m.fullName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Contract Type</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Contract Type" [formControlName]="'contractTypeId'" [nzSize]="'large'" class="d-block" (ngModelChange)="applyFilter($event, 'Contract')">
                                                        <nz-option *ngFor="let m of contractTypesList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Work Type</label>
                                                    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Work Type" [formControlName]="'workTypeId'" [nzSize]="'large'" class="d-block">
                                                        <nz-option *ngFor="let m of workTypesList" [nzLabel]="m.enName" [nzValue]="m.id"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <div class="pl-lg-4">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group" *ngIf="contractTypeControl.value == '2'">
                                                <label class="form-control-label">Contract Date</label>
                                                <nz-range-picker [nzShowTime]="false" class="w-100" [nzSize]="'large'" ngModel (ngModelChange)="applyFilter($event, 'Range')" [nzFormat]="'yyyy-MM-dd'" [ngModel]="defultDate">
                                                </nz-range-picker>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <form [formGroup]="employeeForm">
                                    <div class="pl-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                                    <label class="form-control-label">Hire Date</label>
                                                    <nz-date-picker [formControlName]="'hireDate'" class="w-100" [nzShowTime]="false" [nzSize]="'large'" nzFormat="yyyy-MM-dd"></nz-date-picker>

                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Employee Id</label>
                                                    <input type="text" class="form-control form-control-alternative" placeholder="Employee Id" [formControlName]="'employeeId'">
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-group">
                                                    <label class="form-control-label">Secret Code</label>
                                                    <input type="text" class="form-control form-control-alternative" placeholder="Secret Code" [formControlName]="'code'">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</nz-spin>